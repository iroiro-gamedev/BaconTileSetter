<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta name="description" content="BaconTileSetter — Browser-based tileset generator for game developers. Free, no backend." />
  <meta property="og:title" content="BaconTileSetter" />
  <meta property="og:description" content="Generate 16-tile, 47-tile and Wang tilesets in your browser." />
  <meta property="og:image" content="Image/OPG.png" />
  <meta property="og:image:width" content="1200" />
  <meta property="og:image:height" content="630" />
  <meta property="og:type" content="website" />
  <meta name="twitter:card" content="summary_large_image" />
  <meta name="twitter:title" content="BaconTileSetter" />
  <meta name="twitter:description" content="Generate 16-tile, 47-tile and Wang tilesets in your browser." />
  <meta name="twitter:image" content="Image/OPG.png" />
  <title>BaconTileSetter</title>
  <link rel="icon" type="image/png" href="Image/Favicon.png" />
  <link rel="stylesheet" href="css/style.css" />
</head>
<body>

  <header class="navbar">
    <a href="index.html" class="logo">
      <svg width="22" height="22" viewBox="0 0 22 22" fill="none" aria-hidden="true">
        <rect x="1" y="1" width="9" height="9" rx="1.5" fill="var(--accent)"/>
        <rect x="12" y="1" width="9" height="9" rx="1.5" fill="var(--accent-dim)"/>
        <rect x="1" y="12" width="9" height="9" rx="1.5" fill="var(--accent-dim)"/>
        <rect x="12" y="12" width="9" height="9" rx="1.5" fill="var(--accent)"/>
      </svg>
      BaconTileSetter
    </a>

    <div class="nav-right" id="nav-right">
      <nav class="nav-links">
        <a href="about.html" data-i18n="nav.about">About</a>
        <a href="contact.html" data-i18n="nav.contact">Contact</a>
        <a href="terms.html" data-i18n="nav.terms">Terms</a>
      </nav>
      <!-- Single button — click to cycle EN → JA → ZH → EN -->
      <button class="lang-cycle" id="lang-cycle" aria-label="Switch language">EN</button>
    </div>

    <button class="hamburger" id="hamburger" aria-label="Open menu" aria-expanded="false">
      <span></span><span></span><span></span>
    </button>
  </header>

  <main class="app-layout">

    <!-- Upload Panel -->
    <section class="panel upload-panel">
      <h2 class="panel-title" data-i18n="section.upload">Upload Images</h2>
      <p class="panel-hint" data-i18n="uploader.hint">Drop or click each slot to upload. Preview updates instantly.</p>

      <div class="upload-grid">

        <!-- MAIN -->
        <div class="dropzone" id="drop-main" data-slot="main">
          <label class="dz-click" for="file-main">
            <canvas class="dz-bg"></canvas>
            <span class="dz-name" data-i18n="uploader.main">Main</span>
            <div class="dz-empty">
              <span class="dz-icon-char">&#9633;</span>
            </div>
          </label>
          <div class="dz-controls">
            <button class="tf-btn" data-tf="rot-ccw" title="Rotate CCW">&#8634;</button>
            <button class="tf-btn" data-tf="rot-cw"  title="Rotate CW">&#8635;</button>
            <button class="tf-btn" data-tf="flip-x"  title="Flip H">&#8596;</button>
            <button class="tf-btn" data-tf="flip-y"  title="Flip V">&#8597;</button>
          </div>
          <input type="file" id="file-main" accept="image/*" hidden>
        </div>

        <!-- TOP -->
        <div class="dropzone" id="drop-top" data-slot="top">
          <label class="dz-click" for="file-top">
            <canvas class="dz-bg"></canvas>
            <span class="dz-name" data-i18n="uploader.top">Top</span>
            <div class="dz-empty">
              <span class="dz-icon-char">&#8593;</span>
            </div>
          </label>
          <div class="dz-controls">
            <button class="tf-btn" data-tf="rot-ccw" title="Rotate CCW">&#8634;</button>
            <button class="tf-btn" data-tf="rot-cw"  title="Rotate CW">&#8635;</button>
            <button class="tf-btn" data-tf="flip-x"  title="Flip H">&#8596;</button>
            <button class="tf-btn" data-tf="flip-y"  title="Flip V">&#8597;</button>
          </div>
          <input type="file" id="file-top" accept="image/*" hidden>
        </div>

        <!-- BOTTOM -->
        <div class="dropzone" id="drop-bottom" data-slot="bottom">
          <label class="dz-click" for="file-bottom">
            <canvas class="dz-bg"></canvas>
            <span class="dz-name" data-i18n="uploader.bottom">Bottom</span>
            <div class="dz-empty">
              <span class="dz-icon-char">&#8595;</span>
            </div>
          </label>
          <div class="dz-controls">
            <button class="tf-btn" data-tf="rot-ccw" title="Rotate CCW">&#8634;</button>
            <button class="tf-btn" data-tf="rot-cw"  title="Rotate CW">&#8635;</button>
            <button class="tf-btn" data-tf="flip-x"  title="Flip H">&#8596;</button>
            <button class="tf-btn" data-tf="flip-y"  title="Flip V">&#8597;</button>
          </div>
          <input type="file" id="file-bottom" accept="image/*" hidden>
        </div>

        <!-- LEFT -->
        <div class="dropzone" id="drop-left" data-slot="left">
          <label class="dz-click" for="file-left">
            <canvas class="dz-bg"></canvas>
            <span class="dz-name" data-i18n="uploader.left">Left</span>
            <div class="dz-empty">
              <span class="dz-icon-char">&#8592;</span>
            </div>
          </label>
          <div class="dz-controls">
            <button class="tf-btn" data-tf="rot-ccw" title="Rotate CCW">&#8634;</button>
            <button class="tf-btn" data-tf="rot-cw"  title="Rotate CW">&#8635;</button>
            <button class="tf-btn" data-tf="flip-x"  title="Flip H">&#8596;</button>
            <button class="tf-btn" data-tf="flip-y"  title="Flip V">&#8597;</button>
          </div>
          <input type="file" id="file-left" accept="image/*" hidden>
        </div>

        <!-- RIGHT -->
        <div class="dropzone" id="drop-right" data-slot="right">
          <label class="dz-click" for="file-right">
            <canvas class="dz-bg"></canvas>
            <span class="dz-name" data-i18n="uploader.right">Right</span>
            <div class="dz-empty">
              <span class="dz-icon-char">&#8594;</span>
            </div>
          </label>
          <div class="dz-controls">
            <button class="tf-btn" data-tf="rot-ccw" title="Rotate CCW">&#8634;</button>
            <button class="tf-btn" data-tf="rot-cw"  title="Rotate CW">&#8635;</button>
            <button class="tf-btn" data-tf="flip-x"  title="Flip H">&#8596;</button>
            <button class="tf-btn" data-tf="flip-y"  title="Flip V">&#8597;</button>
          </div>
          <input type="file" id="file-right" accept="image/*" hidden>
        </div>

      </div>
    </section>

    <!-- Settings Panel -->
    <section class="panel settings-panel">
      <h2 class="panel-title" data-i18n="section.settings">Settings</h2>

      <div class="field-group">
        <label for="tileset-name" data-i18n="name.label">Name</label>
        <input type="text" id="tileset-name" value="BaconTileSet" maxlength="48" />
      </div>

      <div class="field-group">
        <label for="algorithm" data-i18n="algorithm.label">Algorithm</label>
        <select id="algorithm">
          <option value="16" data-i18n="algorithm.16">16-Tile Adjacency</option>
          <option value="47" data-i18n="algorithm.47">47-Tile Autotile</option>
        </select>
      </div>

      <div class="field-group">
        <label for="tile-size" data-i18n="tilesize.label">Tile Size (px)</label>
        <input type="number" id="tile-size" value="32" min="8" max="256" step="8" />
      </div>
    </section>

    <!-- Preview Panel -->
    <section class="panel preview-panel">
      <h2 class="panel-title" data-i18n="preview.title">Adjacency Preview</h2>
      <p class="panel-hint" data-i18n="preview.hint">Updates automatically when images change.</p>
      <div class="zoom-bar">
        <button class="zoom-btn" id="preview-zoom-out"   data-i18n="zoom.out">−</button>
        <span   class="zoom-label" id="preview-zoom-label">2×</span>
        <button class="zoom-btn" id="preview-zoom-in"    data-i18n="zoom.in">+</button>
        <button class="zoom-btn zoom-reset" id="preview-zoom-reset" data-i18n="zoom.reset">1×</button>
      </div>
      <div class="canvas-wrap">
        <canvas id="preview-canvas"></canvas>
      </div>
    </section>

    <!-- Tile Placement Preview Panel -->
    <section class="panel tilemap-panel">
      <h2 class="panel-title" data-i18n="tilemap.title">Tile Placement Preview</h2>
      <p class="panel-hint" data-i18n="tilemap.hint">Click or drag to place / remove tiles.</p>
      <div class="tilemap-controls">
        <div class="zoom-bar">
          <button class="zoom-btn" id="tilemap-zoom-out"   data-i18n="zoom.out">−</button>
          <span   class="zoom-label" id="tilemap-zoom-label">1×</span>
          <button class="zoom-btn" id="tilemap-zoom-in"    data-i18n="zoom.in">+</button>
          <button class="zoom-btn zoom-reset" id="tilemap-zoom-reset" data-i18n="zoom.reset">1×</button>
        </div>
        <button class="btn-secondary" id="tilemap-clear" data-i18n="tilemap.clear">Clear</button>
        <button class="btn-secondary" id="tilemap-fill"  data-i18n="tilemap.fill">Fill All</button>
      </div>
      <div class="tilemap-canvas-wrap">
        <canvas id="tilemap-canvas"></canvas>
      </div>
    </section>

    <!-- Export Panel (shown after first image upload) -->
    <section class="panel export-panel" id="export-panel" hidden>
      <h2 class="panel-title" data-i18n="export.title">Spritesheet</h2>
      <div class="export-buttons">
        <button id="export-png"   class="btn-secondary" data-i18n="export.png">Export PNG</button>
        <button id="export-unity" class="btn-secondary" data-i18n="export.unity">Export Unity Package</button>
      </div>
    </section>

  </main>

  <footer class="footer">
    <p data-i18n="footer.license">Generated content belongs to the user. No warranty. No credit required.</p>
    <p>© 2024 <a href="about.html">iroiro</a> &nbsp;·&nbsp; v0.1.0</p>
  </footer>

  <!-- Tile hover tooltip (adjacency preview) -->
  <div id="tile-tooltip" class="tile-tooltip" hidden>
    <div class="tt-grid">
      <div class="tt-cell" data-pos="nw"></div>
      <div class="tt-cell" data-pos="n"></div>
      <div class="tt-cell" data-pos="ne"></div>
      <div class="tt-cell" data-pos="w"></div>
      <div class="tt-cell tt-self"></div>
      <div class="tt-cell" data-pos="e"></div>
      <div class="tt-cell" data-pos="sw"></div>
      <div class="tt-cell" data-pos="s"></div>
      <div class="tt-cell" data-pos="se"></div>
    </div>
    <div class="tt-label" id="tt-label"></div>
  </div>

  <script type="module" src="js/main.js"></script>
</body>
</html>
